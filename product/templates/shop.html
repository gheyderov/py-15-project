{% extends 'base.html' %}
{% load static %}

{% block title %}
	<title>Furni Free Bootstrap 5 Template for Furniture and Interior Design Websites by Untree.co </title>

{% endblock %}

{% block css %}
	<style>
		.pagination .page-link {
			border-radius: 10px;
			margin: 0 5px;
			transition: all 0.3s ease-in-out;
			color: #333;
			font-weight: 600;
			box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);
		}

		.pagination .page-link:hover {
			background-color: #007bff;
			color: white;
			box-shadow: 0px 4px 10px rgba(0, 123, 255, 0.3);
		}

		.pagination .active .page-link {
			background-color: #007bff;
			color: white;
			border-color: #007bff;
			box-shadow: 0px 4px 10px rgba(0, 123, 255, 0.3);
		}

		.category-sidebar {
			/* background-color: #f9f9f9; */
			/* Light background */
			border: 1px solid #ddd;
			/* Subtle border */
			border-radius: 8px;
			/* Rounded corners */
			padding: 20px;
			/* Inner spacing */
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			/* Slight shadow */
		}

		.category-sidebar h4 {
			font-size: 18px;
			/* Larger heading */
			font-weight: bold;
			/* Bold text */
			color: #333;
			/* Darker color for contrast */
			margin-bottom: 16px;
			/* Space below heading */
			text-transform: uppercase;
			/* All caps */
		}

		.category-sidebar ul {
			list-style: none;
			/* Remove default bullets */
			padding: 0;
			/* Remove padding */
			margin: 0;
			/* Remove margin */
		}

		.category-sidebar ul li {
			margin-bottom: 8px;
			/* Spacing between items */
		}

		.category-sidebar ul li a {
			display: block;
			/* Make the link a block element */
			padding: 10px 12px;
			/* Add padding for a clickable area */
			color: #555;
			/* Neutral text color */
			text-decoration: none;
			/* Remove underline */
			border-radius: 6px;
			/* Rounded edges for hover effect */
			transition: all 0.3s ease;
			/* Smooth hover transition */
		}

		.category-sidebar ul li a:hover {
			background-color: #3b5d50;
			/* Highlight color */
			color: #fff;
			/* White text on hover */
			text-decoration: none;
			/* Keep text clean */
		}
	</style>
{% endblock %}

{% block content %}
	<!-- Start Hero Section -->
	<div class="hero">
		<div class="container">
			<div class="row justify-content-between">
				<div class="col-lg-5">
					<div class="intro-excerpt">
						<h1>Shop</h1>
					</div>
				</div>
				<div class="col-lg-7">

				</div>
			</div>
		</div>
	</div>
	<!-- End Hero Section -->



	<div class="untree_co-section product-section before-footer-section">
		<div class="container">
			<div class="row">

				<!-- Start Sidebar -->
				<div class="col-12 col-md-4 col-lg-3 mb-5">
					<div class="category-sidebar">
						<h4 class="mb-4">Filter by Category</h4>
						<ul class="list-unstyled">
							<li><a href="#" class="d-block py-2">All Products</a></li>
							{% for category in categories %}
							<li>
								<a href="#" class="d-block py-2 category-toggle" data-target="#{{category.title}}">
									<span class="toggle-icon">➕</span> {{category.title}}
								</a>
								<ul id="{{category.title}}" class="collapse list-unstyled ps-3">

									{% for subcategory in category.child.all %}
									<li><a href="{% url 'shop' %}?category={{subcategory.id}}" class="d-block py-1">{{subcategory.title}}</a></li>
									{% endfor %}
								</ul>
							</li>
							{% endfor %}
						</ul>
					</div>
				</div>

				<!-- JavaScript to Handle Toggle Effect and Icons -->
				<script>
					document.addEventListener("DOMContentLoaded", function () {
						let toggles = document.querySelectorAll(".category-toggle");

						toggles.forEach(toggle => {
							toggle.addEventListener("click", function (event) {
								event.preventDefault();
								let target = document.querySelector(this.getAttribute("data-target"));
								let icon = this.querySelector(".toggle-icon");

								if (target.classList.contains("show")) {
									target.classList.remove("show"); // Close subcategory
									icon.textContent = "➕"; // Change icon to plus
								} else {
									target.classList.add("show"); // Open subcategory
									icon.textContent = "➖"; // Change icon to minus
								}
							});
						});
					});
				</script>

				<!-- End Sidebar -->

				<!-- Start Product Grid -->
				<div class="col-12 col-md-8 col-lg-9">
					<div class="row">
						<!-- Start Column 1 -->
						{% for product in products %}
						<div class="col-12 col-md-4 col-lg-3 mb-5">
							<a class="product-item" href="">
								<img src="{{product.cover_image.url}}" class="img-fluid product-thumbnail">
								<h3 class="product-title">{{product.title | upper}}</h3>
								<strong class="product-price">${{product.price}}</strong>

								<span class="icon-cross update-item" data-product="{{product.id}}" data-action="add">
									<img src="{% static 'images/cross.svg' %}" class="img-fluid">
								</span>
							</a>
						</div>
						{% endfor %}
						<!-- End Column 1 -->

						
					</div>
				</div>
				<!-- End Product Grid -->

				<!-- Pagination -->
				<div class="pagination-container d-flex justify-content-center mt-4">
					<nav aria-label="Page navigation">
						<ul class="pagination pagination-lg">
							{% if page_obj.has_previous %}
							<li class="page-item">
								<a class="page-link" href="?page=#" aria-label="Previous">
									<span>&laquo;</span>
								</a>
							</li>
							{% endif %}
							<!-- Numbered Pages -->
							 {% for page in page_obj.paginator.page_range  %}
							 {% if page is page_obj.number %}
							<li class="page-item active"><a class="page-link" href="?page={{page}}">{{page}}</a></li>
							{% else %}
							<li class="page-item"><a class="page-link" href="?page={{page}}">{{page}}</a></li>
							{% endif %}
							{% endfor %}

							{% if page_obj.has_next %}
							<li class="page-item">
								<a class="page-link" href="?page=#" aria-label="Next">
									<span>&raquo;</span>
								</a>
							</li>
							{% endif %}
						</ul>
					</nav>
				</div>
				<!-- End Pagination -->
			</div>
		</div>
	</div>

{% endblock %}
	
